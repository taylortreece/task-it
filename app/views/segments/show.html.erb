<h1><%= @segment.title %></h1><%= link_to "Update Segment", edit_project_segment_path(@segment.project, @segment) %><%= link_to "Delete Segment", @segment, :method => :delete %>
<h3><%= @segment.project.title %></h3>
Assigned Team: <%= @segment.team.name %><br><br>

<%= form_for [@segment.project, @segment] do |f| %>
<% if @segment.completed == false %>
    Mark if segment is completed: 
    <%= f.radio_button :completed, true, { onchange: 'this.form.submit();' } %>
  <% else %>
    Mark if segment is incomplete:
    <%= f.radio_button :completed, false, { onchange: 'this.form.submit();' } %>
  <% end %>
<% end %>

<% @segment.tasks.each do |task| %>
    <% if !task.id.nil? && !task.assigned_user_id.nil? %>
    Task: <%= link_to "#{task.title}", segment_task_path(@segment.id, task.id) %>,
    Assigned Team Member: <%= link_to "#{task.assigned_user.full_name}", team_user_path(task.assigned_user) %> - <%= task.position.title %>
    <% end %><br><br>
<% end %>

<%= link_to "Add Tasks", project_segment_path(@segment, :show_task_form => true) unless @task %>

<%= render :partial => 'tasks/form', :locals => { :task => @task } if @task %>

<%= link_to "Add User", project_segment_path(@segment, :show_task_and_user_form => true) if @task && @user.nil? %>

<%= render :partial => 'segment_comments/form', :locals => { :subject => @segment } %>

<br><br>Comments: <br><br>

<% @segment.segment_comments.each do |comment| %>
  <% if @segment.segment_comments.empty? %>
    <p>There are no comments to view on this post. <%= link_to "Create Comment", new_segment_comment_path %>
  <% else %>
      <% if !comment.id.nil? || !comment.content.nil?%>
        <%= comment.user.full_name %><br>
        <%= comment.content %>
    <% end %>
  <% end %>
<% end %>